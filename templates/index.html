<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-site-verification" content="Sq4aw55_6yf_231cHOyw1m5daRLidQMopOzQJf6Z9zI" />
  <title>Render Chat App - Free Real-Time Messaging Platform</title>
  <link rel="icon" href="https://i.postimg.cc/nVmZ1VCy/130e91956494570-file-0000000071b861f5b05f18218ed05aa5-wm.png">
  <meta name="description" content="Render Chat App is a free real-time messaging platform to chat online with friends, create groups, and stay connected. Fast, secure, and easy-to-use chat app for seamless communication anytime, anywhere.">
  <meta name="keywords" content="chat app, real-time messaging, online chat, group chat, instant messaging, secure chat, free chat app, Chat-verse, Chatverse, Render Chat App">
  <meta name="author" content="Render Chat App Team">
  <meta name="robots" content="index, follow">
function
  <!-- Open Graph -->
  <meta property="og:title" content="Render Chat App - Free Real-Time Messaging">
  <meta property="og:description" content="Chat online with friends, create groups, and stay connected with Render Chat App. Fast, secure, and easy-to-use real-time chat experience.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://render-chat-app-rb18.onrender.com/">
  <meta property="og:image" content="https://i.postimg.cc/mZzs31yy/a79998359f0a8ae-file-000000001b2461f8b67453828725f925-wm.png">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Render Chat App - Free Real-Time Messaging">
  <meta name="twitter:description" content="Fast, secure, and easy-to-use chat app for seamless communication anytime, anywhere.">
  <meta name="twitter:image" content="https://i.postimg.cc/mZzs31yy/a79998359f0a8ae-file-000000001b2461f8b67453828725f925-wm.png">

  <!-- Scripts & Styles -->
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Baloo+2:wght@400;600&family=Nunito:wght@400;700&family=Chewy&family=Merriweather:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.metroui.org.ua/dev/icons.css"/>
<link rel="stylesheet" href="https://cdn.statically.io/gh/olton/metroui/master/lib/metro.css"/>
<script src="https://cdn.statically.io/gh/olton/metroui/master/lib/metro.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/marked/lib/marked.umd.js"></script>
       <script src="https://kit.fontawesome.com/549f2c4b6c.js" crossorigin="anonymous"></script>
  <style>
    .fu-modal-close { display: none; }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Poppins', sans-serif;
      background: radial-gradient(circle at top right, purple, #2F3560, #2D334A, #272C44, #28304A) ;
      height: 100vh;
    }
    .div1 {
      display: grid;
      margin: 1vh;
      border-radius: 5vh;
      color: white;
      place-items: center;
      height: 10vh;
      width: 90%;
      place-self: center;
    }
    h1 {
      font-size: 5.75vh;
      font-weight: 400;
      place-self: center;
      font-family: 'Poppins', sans-serif;
      margin-left: -3vh;
    }
    .main { z-index: 6; max-height: 100vh; height: 90%; position: relative; }
    #messages {
      border: 1px solid #28304A;
      box-shadow: 1px 2px 3px black;
      position: absolute;
      top: 12vh; bottom: 12vh; left: 2vh; right: 2vh;
      overflow-y: auto;
      padding: 10px;
      background: transparent;
      backdrop-filter: blur(20px);
      border-radius: 10px;
      color: white;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .msg {
      background: var(--bg);
      color: #dcddde;
      max-width: max-content;
      padding: 12px 14px;
      border-radius: 12px;
      line-height: 1.4;
      box-shadow: 0 1px 2px rgba(0,0,0,0.35);
      position: relative;
      transition: background 0.2s ease;
    }
    .msg:hover { background: #3a3c42; }
    .msg::after {
      content: "";
      position: absolute;
      left: -8px;
      bottom: 8px;
      width: 16px; height: 14px;
      background: var(--bg);
      clip-path: polygon(100% 0, 0 50%, 100% 100%);
      filter: drop-shadow(0 1px 2px rgba(0,0,0,0.35));
    }
    .msg.me {
      align-self: flex-end;
      --bg: #5865f2;
      color: #fff;
    }
    .msg.me:hover { background: #6873f5; }
    .msg.me::after { left: auto; right: -8px; transform: scaleX(-1); }
    .chatbox {
      position: absolute;
      bottom: 1vh; left: 1.5vh; right: 12vh;
      border: 1px solid #2F3560;
      height: 10vh;
      border-radius: 5vh;
      background: transparent;
      backdrop-filter: blur(20px);
      display: flex;
      align-items: center;
      padding: 0 3vh;
      transition: background-color 1s ease;
    }
    .chatbox:hover { background: #2F3560; }
    .input1 {
      width: 100%; font-size: 3.0vh !important; border: none!important; outline: none!important;
      background: transparent !important; color: skyblue !important;
    }
    .input1, 
.input1:focus, 
.input1:hover, 
.input1:active {
  outline: none !important;
  border: none !important;
  box-shadow: none !important;
}
    .submit {
      position: absolute; bottom: 1vh; right: 1.5vh;
      height: 10vh; width: 10vh; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      cursor: pointer; background: transparent;
      backdrop-filter: blur(20px);
      transition: background-color 0.3s ease;
      border: 1px solid #2F3560;
    }
    .submit1 { font-size: 3.0vh; border: none; background: transparent !important; color: lightblue; 
      transform: rotate(45deg);
      text-align: center;
    }
    .submit1:focus { outline: none; }
    .submit:hover { background: rgb(27,131,212) !important; }
    .td { display: grid; place-items: end; position: absolute; top: 2.5vh; right: 2.25vh; width: 4vh; height: 4vh; cursor: pointer; }
    .td dt { height: 5px; width: 100%; background: black; border-radius: 5px; transition: 0.4s; }
    .td.ro dt:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
    .td.ro dt:nth-child(2) { opacity: 0; }
    .td.ro dt:nth-child(3) { transform: rotate(-45deg) translate(6px, -6px); }
    .header {
      background: black;
      padding: 5px;
      position: fixed; top: 12.5vh; right: 1vh;
      opacity: 0; z-index: -1;
      border: 1px solid purple;
      display: grid; place-items: center;
      transition: transform .2s ease;
      transform: translateY(-8px);
    }
    .header.open {
      opacity: 1; z-index: 99; transform: translateY(0);
      opacity: 1; z-index: 99; transform: translateY(0);
      background: #333; backdrop-filter: blur(20px);
      border: 1px solid purple; border-radius: 2vh;
      padding: 15px; color: white;
    }
    ul { list-style: none; margin-left: 5px; padding: 0; font-family: Poppins; font-weight: 500; }
    li, a { font-size: 2.75vh; background: transparent; color: white; text-decoration: none; }
    a:focus { text-decoration: none; }
    .rules {
      background: rgba(0,0,0,0.5); color: cyan;
      border: 2px solid blue; border-radius: 8px;
      padding: 10px; margin: 10px; font-size: 2vh;
      box-shadow: 0 0 10px cyan;
    }
    .rules h3 { margin-bottom: 6px; font-size: 2.5vh; text-align: center; }
    #onlineUsers { margin-top: 10px; padding: 10px; border-top: 1px solid purple; }
    #onlineUsers li { font-size: 2.5vh; color: blue; padding: 5px 0; }
    .chatai {
      position: absolute; border-radius: 3vh;
      z-index: 10; bottom: 20vh; right: 2vh;
      padding: 3vh; color: white;
      font-size: 1.75vh;
    }
    .window{
      z-index: 999 !important;
    }
    iframe{
     height: auto;
     width: 75vh;
    }
  </style>
</head>
<body>
  <div class="header" id="menu">
    <ul>
      <li><a href="#" id="usersButton">üü¢ Online</a></li>
      <li><a href="https://L2hport.is-a.dev">Portfolio</a></li>
      <li><a href="https://anuragl2h.github.io/L2h-anitrest/index.html">Anime Story</a></li>
      <li><a href="https://discord.gg/urRpFsdJ">Join Discord</a></li>
      <li><a href="#" id="set">‚öôÔ∏è Setting</a></li>
      <li><a id="rule" class="button outline info">‚ö†Ô∏è Rules</a></li>
    </ul>
  </div>

  <ul id="onlineUsers" style="display:none;"></ul>

  <div class="main">
    <div class="div1">
      <h1>Chat Verse</h1>
      <section class="td" id="menuBtn" aria-label="Open menu">
        <dt></dt><dt></dt><dt></dt>
      </section>
    </div>

    <div id="messages"></div>

    <div class="chatbox">
      <input type="text" id="message" name="message" placeholder="Send..." class="input1" autocomplete="off">
    </div>
    <div class="submit">
      <button class="submit1" id="sendBtn" aria-label="Send"><i class="fa-solid fa-paper-plane"></i></button>
    </div>
  </div>

  <button class="chatai button info"><a href="/chatai">Chat Ai<i class="fa-solid fa-comment"></i>
  </a></button>

  <script>
    $(function(){
      let name = localStorage.getItem("UserName");
      const socket = io("/", { query: `username=${name || 'Anonymous'}` });

      if (!name) {
        $('#message, #sendBtn').prop('disabled', true);
        Metro.dialog.create({
          title: "Enter Your Name",
          content: '<input id="inp" class="input" placeholder="What\'s your name?" autofocus><button class="button primary outline" id="nameSubmit">Submit</button>',
        });
      }

      $(document).on('click', '#nameSubmit', function(){
        const val = $("#inp").val().trim();
        if (!val) {
          Metro.toast.createt("Please enter a name!");
          return;
        }
        name = val;
        localStorage.setItem("UserName", name);
        socket.disconnect();
        socket.io.opts.query = `username=${name}`;
        socket.connect();
        $('.fu-modal-close').click();
        $('#message, #sendBtn').prop('disabled', false);
        loadHistory();
      });

       // Corrected JavaScript code for index.html
function loadHistory(){
    fetch("/history")
        .then(res => res.json())
        .then(data => {
            $("#messages").empty();
            data.history.reverse().forEach(item => {
                // Access the username and message properties
                const username = item.username;
                const message = item.message;
                
                const fullMessage = `${username}: ${message}`;
                const isMe = username === name; // Check if the username matches the current user
                
                const div = $("<div>").addClass("msg").text(fullMessage);
                if(isMe) {
                  div.addClass("me");
                }
                $("#messages").append(div);
            });
            $("#messages").scrollTop($("#messages")[0].scrollHeight);
        });
}
      if (name) loadHistory();

      // Online users
      socket.on("update_users", function(users){
        const ul = $("#onlineUsers");
        ul.empty();
        users.forEach(user => $("<li>").text(user).appendTo(ul));
      });

      $(document).on("click", "#usersButton", function() {
        const onlineList = $("#onlineUsers").clone().show();
        Metro.dialog.create({
          title: "Online Users",
          content: onlineList.prop("outerHTML"),
        });
      });

      // Receive messages
      socket.on("message", function(msg){
        const isMe = msg.startsWith(name + ": ");
        const div = $("<div>").addClass("msg").text(msg);
        if(isMe) div.addClass("me");
        $("#messages").append(div);
        $("#messages").scrollTop($("#messages")[0].scrollHeight);
      });

      // Send
      function sendMessage(){
        const msg = $("#message").val().trim();
        if(!msg) return;
        const abusiveWords = ["mc","bc","gandu","chutiya","madarchod","bhosdike","randi","lund","fuck","porn","sex","nude","bhadua"];
        if (abusiveWords.some(word => msg.toLowerCase().includes(word))) {
          Metro.toast.create("No abusive words allowed");
          return;
        }
        socket.send(msg);
        $("#message").val("").focus();
      }
      $(".submit").on("click", sendMessage);
      $("#message").on("keydown", e => { if(e.key === "Enter"){ e.preventDefault(); sendMessage(); } });

      // Menu toggle
      $("#menuBtn").on("click", function(){
        $("#menu").toggleClass("open");
        $(this).toggleClass("ro");
      });
      $(document).on("click", function(e){
        if(!$(e.target).closest("#menu, #menuBtn").length){
          $("#menu").removeClass("open");
          $("#menuBtn").removeClass("ro");
        }
      });
      $(document).on("keydown", function(e){
        if(e.key === "Escape" && $("#menu").hasClass("open")){
          $("#menu").removeClass("open");
          $("#menuBtn").removeClass("ro");
        }
      });

      // Change username
      // Change username
$(document).on("click", "#set", function(){
  Metro.dialog.create({
    title: "Change Username",
    content: `<input id="ni" data-role="input" placeholder="New username" autofocus><br><button id="close" class="button primary">Submit</button>`,
    closeButton: true
  });
});
$(document).on("click", "#close", function(){
  const val = $('#ni').val().trim();
  name = val || "Anonymous";
  localStorage.setItem("UserName", name);
  socket.disconnect();
  socket.io.opts.query = `username=${name}`;
  socket.connect();
  Metro.toast.create("Username successfully changed");
  Metro.dialog.close(Metro.dialog.get(this));
  loadHistory();
});
$(document).on("click", ".moc", () => Metro.dialog.close(Metro.dialog.get(this)));

      // Rules
      $(document).on("click", "#rule", function(){
        Metro.dialog.create({
          title: "Rules",
          content: `<div class="rules"><h3>üö´ No abusive language<br>üö´ No personal info<br>üö´ No links</h3></div>`,
        });
      });
    });
  </script>
</body>
</html>